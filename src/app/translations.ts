export type Lang = "en" | "nl";

export const translations: Record<
  Lang,
  Record<string, string>
> = {
  en: {
    // Tabs
    tabs_today: "Today",
    tabs_calendar: "Calendar",
    tabs_settings: "Settings",
    // Common
    common_close: "Close",
    common_ok: "OK",
    common_cancel: "Cancel",
    // Loading
    loading: "Loading…",
    loading_screen_tagline: "The easiest way to watch yourself change.",
    loading_question_today: "Loading today's question…",
    loading_question: "Loading question…",
    loading_calendar: "Loading calendar…",
    joker_tooltip: "Jokers let you answer missed days within the last 7 days.",
    aria_joker_balance: "Joker balance",
    joker_modal_title: "Jokers",
    joker_modal_title_one: "Joker",
    joker_modal_title_many: "Jokers",
    joker_modal_body: "You have {joker_balance} jokers.\n\nUse a joker to still answer a missed day.",
    joker_modal_body_singular: "You have 1 joker.\n\nUse a joker to still answer a missed day.",
    joker_modal_badge_label: "Jokers",
    // Onboarding
    onboarding_email: "Email",
    onboarding_password: "Password",
    onboarding_sign_up: "Sign up",
    onboarding_sign_in: "Sign in",
    onboarding_signing_up: "Signing up…",
    onboarding_signing_in: "Signing in…",
    onboarding_toggle_sign_in: "Already have an account? Sign in",
    onboarding_toggle_sign_up: "No account yet? Sign up",
    // Monday recap
    recap_body: "Last week you answered {count} of the {total} questions.",
    recap_mooi: "yay!",
    recap_answer_missed: "Answer a missed day",
    recap_title: "Monday Recap",
    recap_subtitle: "How did last week go?",
    recap_perfect_week_title: "Perfect Week!",
    recap_perfect_week_subtitle: "Amazing! You answered every day last week!",
    recap_stats_intro: "Last week you've answered",
    recap_out_of: "out of",
    recap_days: "days",
    recap_perfect_cta: "Perfect week! Keep it up!",
    recap_joker_cta: "Answer missed day",
    // Today view
    today_ready: "Ready for today",
    today_edit_answer: "Edit answer",
    today_submit: "Submit",
    today_answer_question: "Answer",
    today_update: "Update",
    today_placeholder: "Type your answer…",
    today_no_question: "There is no question for today.",
    today_question_label: "Today's question",
    today_come_back_tomorrow: "Come back tomorrow for a fresh question.",
    today_submit_error: "Your answer could not be sent. Please try again.",
    today_login_to_submit: "Log in to send an answer.",
    today_answer_changed: "Answer changed",
    // Missed day modal
    missed_title: "You missed this day",
    missed_prompt: "Do you want to answer it now?",
    missed_answer_now: "Answer now",
    missed_use_joker_prompt: "Want to use a joker to answer it?",
    missed_use_joker_message: "You missed this day.\n\nWith a joker you can still answer it.",
    missed_use_joker_btn: "Use joker",
    missed_no_jokers_body: "You don't have any jokers left.",
    missed_no_jokers_left_error: "No jokers left",
    // Closed day modal
    closed_title: "This day is closed",
    closed_body: "You can only answer questions from the last 7 days.",
    // Missed day answer modal
    missed_answer_question_label: "Question for that day",
    missed_answer_submitting: "Submitting…",
    missed_answer_error_load: "Question could not be loaded.",
    missed_answer_error_none: "No question available for this day.",
    missed_answer_error_generic: "Something went wrong.",
    missed_answer_error_before_account: "This date is before your account start.",
    missed_answer_error_outside_window: "This date is outside the 7-day window.",
    missed_answer_error_save: "Save failed.",
    // Calendar
    calendar_prev: "Previous",
    calendar_next: "Next",
    calendar_today: "Today",
    calendar_select_year: "Select year",
    calendar_select_year_title: "Select year",
    calendar_login_prompt: "Log in to see your answers.",
    calendar_error_load: "Answers for this month could not be loaded.",
    calendar_answered_this_month: "{captured} / {total} questions answered this month",
    calendar_view_answer_close: "Close",
    calendar_your_answer: "Your answer",
    calendar_next_reward: "Next Reward",
    calendar_next_reward_milestone: "{count}-Day Streak",
    calendar_next_reward_days_left_one: "1 more day to go",
    calendar_next_reward_days_left_other: "{count} more days to go",
    // Streak popup
    streak_popup_title_7: "7-Day Streak!",
    streak_popup_title_30: "30-Day Streak!",
    streak_popup_title_100: "100-Day Streak!",
    streak_popup_subtitle_7: "Amazing! You've answered for 7 days in a row!",
    streak_popup_subtitle_30: "Incredible! You've answered for 30 days straight!",
    streak_popup_subtitle_100: "Incredible! You've answered for 100 days straight!",
    streak_popup_earned: "You've earned",
    streak_popup_joker_count: "1 Joker",
    streak_popup_joker_hint: "Use it to answer a missed day",
    streak_popup_cta: "Keep it going!",
    // Settings
    settings_title: "Settings",
    settings_subtitle: "Customize your experience",
    settings_signed_in_as: "Signed in as:",
    settings_sign_out: "Sign out",
    settings_signing_out: "Signing out…",
    settings_version: "Version 3.0",
    settings_tagline: "One question a day.",
    settings_language: "Language",
    settings_lang_en: "English",
    settings_lang_nl: "Dutch",
    settings_reminder: "Daily Reminder",
    settings_reminder_time: "Every day at 9:00 AM",
    settings_appearance: "Appearance",
    settings_appearance_value: "Light & Airy",
    settings_about: "About DailyQ",
  },
  nl: {
    tabs_today: "Vandaag",
    tabs_calendar: "Kalender",
    tabs_settings: "Instellingen",
    common_close: "Sluiten",
    common_ok: "OK",
    common_cancel: "Annuleren",
    loading: "Laden…",
    loading_screen_tagline: "De makkelijkste manier om jezelf te zien veranderen.",
    loading_question_today: "Vraag van vandaag laden…",
    loading_question: "Vraag laden…",
    loading_calendar: "Kalender laden…",
    joker_tooltip: "Jokers laten je gemiste dagen van de afgelopen 7 dagen beantwoorden.",
    aria_joker_balance: "Joker saldo",
    joker_modal_title: "Jokers",
    joker_modal_title_one: "Joker",
    joker_modal_title_many: "Jokers",
    joker_modal_body: "Je hebt {joker_balance} jokers.\n\nGebruik een joker om een gemiste dag alsnog te beantwoorden.",
    joker_modal_body_singular: "Je hebt 1 joker.\n\nGebruik een joker om een gemiste dag alsnog te beantwoorden.",
    joker_modal_badge_label: "Jokers",
    onboarding_email: "Email",
    onboarding_password: "Wachtwoord",
    onboarding_sign_up: "Registreren",
    onboarding_sign_in: "Inloggen",
    onboarding_signing_up: "Bezig met registreren…",
    onboarding_signing_in: "Bezig met inloggen…",
    onboarding_toggle_sign_in: "Heb je al een account? Log in",
    onboarding_toggle_sign_up: "Nog geen account? Registreer",
    recap_body: "Vorige week heb je {count} van de {total} vragen beantwoord.",
    recap_mooi: "yay!",
    recap_answer_missed: "Beantwoord een gemiste dag",
    recap_title: "Maandag-overzicht",
    recap_subtitle: "Hoe ging vorige week?",
    recap_perfect_week_title: "Perfecte week!",
    recap_perfect_week_subtitle: "Geweldig! Je hebt elke dag vorige week beantwoord!",
    recap_stats_intro: "Vorige week heb je",
    recap_out_of: "van de",
    recap_days: "dagen beantwoord",
    recap_perfect_cta: "Perfecte week! Ga zo door!",
    recap_joker_cta: "Gemiste dag beantwoorden",
    today_ready: "Klaar voor vandaag",
    today_edit_answer: "Antwoord bewerken",
    today_submit: "Versturen",
    today_answer_question: "Beantwoorden",
    today_update: "Bijwerken",
    today_placeholder: "Typ je antwoord…",
    today_no_question: "Er staat geen vraag voor vandaag.",
    today_question_label: "Vraag van vandaag",
    today_come_back_tomorrow: "Kom morgen terug voor een nieuwe vraag.",
    today_submit_error: "Je antwoord kon niet worden verstuurd. Probeer het opnieuw.",
    today_login_to_submit: "Log in om een antwoord te versturen.",
    today_answer_changed: "Antwoord gewijzigd",
    missed_title: "Je hebt deze dag gemist",
    missed_prompt: "Wil je die nu alsnog beantwoorden?",
    missed_answer_now: "Nu beantwoorden",
    missed_use_joker_prompt: "Wil je een joker gebruiken om te beantwoorden?",
    missed_use_joker_message: "Je hebt deze dag gemist.\n\nMet een joker kun je de vraag alsnog beantwoorden.",
    missed_use_joker_btn: "Joker inzetten",
    missed_no_jokers_body: "Je hebt geen jokers meer.",
    missed_no_jokers_left_error: "Geen jokers meer",
    closed_title: "Deze dag is gesloten",
    closed_body: "Je kunt alleen vragen van de afgelopen 7 dagen beantwoorden.",
    missed_answer_question_label: "Vraag van die dag",
    missed_answer_submitting: "Bezig…",
    missed_answer_error_load: "Vraag kon niet worden geladen.",
    missed_answer_error_none: "Geen vraag beschikbaar voor deze dag.",
    missed_answer_error_generic: "Er ging iets mis.",
    missed_answer_error_before_account: "Deze datum is vóór het begin van je account.",
    missed_answer_error_outside_window: "Deze datum valt buiten de 7-dagen periode.",
    missed_answer_error_save: "Opslaan mislukt.",
    calendar_prev: "Vorige",
    calendar_next: "Volgende",
    calendar_today: "Vandaag",
    calendar_select_year: "Selecteer jaar",
    calendar_select_year_title: "Selecteer jaar",
    calendar_login_prompt: "Log in om je antwoorden te zien.",
    calendar_error_load: "Antwoorden voor deze maand konden niet worden geladen.",
    calendar_answered_this_month: "{captured} / {total} vragen beantwoord deze maand",
    calendar_view_answer_close: "Sluiten",
    calendar_your_answer: "Je antwoord",
    calendar_next_reward: "Volgende beloning",
    calendar_next_reward_milestone: "{count}-dagen streak",
    calendar_next_reward_days_left_one: "Nog 1 dag te gaan",
    calendar_next_reward_days_left_other: "Nog {count} dagen te gaan",
    streak_popup_title_7: "7-dagen streak!",
    streak_popup_title_30: "30-dagen streak!",
    streak_popup_title_100: "100-dagen streak!",
    streak_popup_subtitle_7: "Mooi! Je hebt 7 dagen achter elkaar beantwoord!",
    streak_popup_subtitle_30: "Ongelooflijk! Je hebt 30 dagen achter elkaar beantwoord!",
    streak_popup_subtitle_100: "Ongelooflijk! Je hebt 100 dagen achter elkaar beantwoord!",
    streak_popup_earned: "Je hebt verdiend",
    streak_popup_joker_count: "1 Joker",
    streak_popup_joker_hint: "Gebruik een joker om een gemiste dag te beantwoorden",
    streak_popup_cta: "OK",
    settings_title: "Instellingen",
    settings_subtitle: "Pas je ervaring aan",
    settings_signed_in_as: "Ingelogd als:",
    settings_sign_out: "Uitloggen",
    settings_signing_out: "Bezig met uitloggen…",
    settings_version: "Versie 3.0",
    settings_tagline: "One question a day.",
    settings_language: "Taal",
    settings_lang_en: "English",
    settings_lang_nl: "Nederlands",
    settings_reminder: "Dagelijkse herinnering",
    settings_reminder_time: "Elke dag om 9:00",
    settings_appearance: "Weergave",
    settings_appearance_value: "Licht & luchtig",
    settings_about: "Over DailyQ",
  },
};

const LANG_STORAGE_KEY = "dailyq-lang";

export function getStoredLanguage(): Lang {
  if (typeof window === "undefined") return "nl";
  const stored = localStorage.getItem(LANG_STORAGE_KEY) as Lang | null;
  return stored === "en" || stored === "nl" ? stored : "nl";
}

export function setStoredLanguage(lang: Lang): void {
  if (typeof window !== "undefined") {
    localStorage.setItem(LANG_STORAGE_KEY, lang);
  }
}

export function t(
  lang: Lang,
  key: string,
  params?: Record<string, string | number>
): string {
  let str = translations[lang][key] ?? translations.nl[key] ?? key;
  if (params) {
    Object.entries(params).forEach(([k, v]) => {
      str = str.replace(new RegExp(`\\{${k}\\}`, "g"), String(v));
    });
  }
  return str;
}
